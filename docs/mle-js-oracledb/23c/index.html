<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>MLE SQL Driver (mle-js-oracledb)</title><meta name="description" content="Documentation for MLE SQL Driver (mle-js-oracledb)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">MLE SQL Driver (mle-js-oracledb)</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>MLE SQL Driver (mle-js-oracledb)</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#executing-sql-in-javascript" id="executing-sql-in-javascript" style="color: inherit; text-decoration: none;">
  <h1>Executing SQL in JavaScript</h1>
</a>
<p>Oracle Database allows executing user-provided JavaScript code since version 21c by using the Multilingual Engine (MLE).
This documentation describes the JavaScript module <code>mle-js-oracledb</code> that ships with the database.</p>
<p>If JavaScript is executed inside the database, SQL statements can be executed using an easy to use SQL driver.
This driver is built-in into the JavaScript engine in the database.
Because JavaScript is executed within the database, there is no need to establish a specific connection and the default connection object must be used.
All SQL statements in the function are executed as <code>CURRENT_USER</code>.</p>

<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
  <h2>Getting Started</h2>
</a>
<p>In order to use the driver, it needs to be imported first.
If executed as a <em>snippet in <code>DBMS_MLE</code>, a dynamic import</em> needs to be used and wrapped within an async function:</p>
<pre><code class="language-JavaScript"><span class="hl-0">const</span><span class="hl-1"> {</span><span class="hl-2">oracledb</span><span class="hl-1">} = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">import</span><span class="hl-1">(</span><span class="hl-4">&#39;mle-js-oracledb&#39;</span><span class="hl-1">);</span>
</code></pre>
<p>If used within <em>MLE modules, the regular ECMAScript module import</em> syntax can be used:</p>
<pre><code class="language-JavaScript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;mle-js-oracledb&#39;</span><span class="hl-1">;</span>
</code></pre>
<p>Executing a SQL query and iterating over the resulting rows is as simple as</p>
<pre><code class="language-JavaScript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">conn</span><span class="hl-1"> = </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-6">defaultConnection</span><span class="hl-1">();</span><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">row</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT EMPNO, ENAME FROM SCOTT.EMP&quot;</span><span class="hl-1">).</span><span class="hl-5">rows</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">empno</span><span class="hl-1"> = </span><span class="hl-5">row</span><span class="hl-1">.</span><span class="hl-2">EMPNO</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">ename</span><span class="hl-1"> = </span><span class="hl-5">row</span><span class="hl-1">.</span><span class="hl-2">ENAME</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">// ...</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The execute function returns an IExecuteReturn object with the field rows which is an array.
Since <code>rows</code> is an array, we can use the JavaScript <code>for..of</code> syntax.</p>
<p>By default, each row is represented as an <code>Object</code>.
Note that if <code>mle-js-oracledb</code> gets imported with the deprecated <code>require</code> syntax, the default is <code>Array</code>, in order to stay compatible with Oracle 21c.</p>

<a href="#array-output-format" id="array-output-format" style="color: inherit; text-decoration: none;">
  <h2>Array Output Format</h2>
</a>
<p>A query result can be configured to return an <code>Array</code> representation (OUT_FORMAT_ARRAY) for each row.</p>
<pre><code class="language-JavaScript"><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">row</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT EMPNO, ENAME FROM SCOTT.EMP&quot;</span><span class="hl-1">, [], {</span><br/><span class="hl-1">  </span><span class="hl-5">outFormat :</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">OUT_FORMAT_ARRAY</span><br/><span class="hl-1">}).</span><span class="hl-5">rows</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">empno</span><span class="hl-1"> = </span><span class="hl-5">row</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">];</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">ename</span><span class="hl-1"> = </span><span class="hl-5">row</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">];</span><br/><span class="hl-1">  </span><span class="hl-7">// ...</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The property names of such result row objects follow Oracle&#39;s standard name-casing rules.
It will commonly be uppercase, since most applications create tables using unquoted, case-insensitive names.</p>

<a href="#in-binds" id="in-binds" style="color: inherit; text-decoration: none;">
  <h2>IN Binds</h2>
</a>
<p>SQL and PL/SQL statements may contain bind parameters, indicated by colon-prefixed identifiers or numerals.
These indicate where separately-specified values are substituted when the statement is executed.
Bind variables can be used to substitute data, but not the text of the statement.</p>
<p>With IN binds, the bound data value, or current value of a JavaScript variable, is used during execution of the SQL statement.</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT :bind1, :bind2, :bind3&quot;</span><span class="hl-1">, [</span><span class="hl-8">42</span><span class="hl-1">, </span><span class="hl-4">&quot;foo&quot;</span><span class="hl-1">, </span><span class="hl-0">true</span><span class="hl-1">]).</span><span class="hl-5">rows</span><span class="hl-1">;</span>
</code></pre>
<p>The position of the array values corresponds to the position of the SQL bind variables as they occur in the statement, regardless of their names.</p>
<p>Instead of binding by array, an object that names each bind value can be used.
The attributes can be in any order, but their names must match the SQL bind parameter names.
This is typically called &quot;bind by name&quot;:</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT :foo, :bar&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-5">foo :</span><span class="hl-1"> </span><span class="hl-8">42</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">bar :</span><span class="hl-1"> </span><span class="hl-4">&quot;foo&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code></pre>
<p>If needed, each IN bind parameter can be described by an object having explicit attributes for the bind direction (dir), the JavaScript type which should be used for binding (type) and the value itself (val):</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT :foo&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-5">foo :</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">val :</span><span class="hl-1"> </span><span class="hl-8">42</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">dir :</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">BIND_IN</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">type :</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">NUMBER</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code></pre>

<a href="#out-binds" id="out-binds" style="color: inherit; text-decoration: none;">
  <h2>OUT Binds</h2>
</a>
<p>PL/SQL functions and procedures can return values through so-called OUT parameters.
In order to retrieve such values, OUT binds can be specified when executing the statement.</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;BEGIN :a := &#39;foo&#39;; :b := 42; END;&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-5">a:</span><span class="hl-1"> { </span><span class="hl-5">dir:</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">BIND_OUT</span><span class="hl-1">, </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">STRING</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-5">b:</span><span class="hl-1"> { </span><span class="hl-5">dir:</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">BIND_OUT</span><span class="hl-1">, </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">NUMBER</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code></pre>
<p>In this example, <code>:a</code> and <code>:b</code> are OUT binds.
<code>result.outBinds</code> is an object containing a property for each OUT bind that was returned.</p>
<p><code>result.outBinds</code> will appear as undefined if the statement doesn&#39;t return any bind values.</p>

<a href="#mapping-between-javascript-and-oracle-types" id="mapping-between-javascript-and-oracle-types" style="color: inherit; text-decoration: none;">
  <h2>Mapping between JavaScript and Oracle types</h2>
</a>
<p>By default Oracle character, number and date columns are selected directly into JavaScript string, number, and Date values.</p>
<p>The default mapping for NUMBER and DATE types can be changed using the fetchInfo property.
Specifically, it allows for returning NUMBER and DATE types as string.</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT EMPNO, HIREDATE FROM SCOTT.EMP&quot;</span><span class="hl-1">, [],  {</span><br/><span class="hl-1">    </span><span class="hl-5">fetchInfo :</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">&quot;EMPNO&quot;</span><span class="hl-5"> :</span><span class="hl-1"> { </span><span class="hl-5">type :</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">STRING</span><span class="hl-1">},    </span><span class="hl-7">// return the number as a string</span><br/><span class="hl-1">      </span><span class="hl-4">&quot;HIREDATE&quot;</span><span class="hl-5"> :</span><span class="hl-1"> { </span><span class="hl-5">type :</span><span class="hl-1"> </span><span class="hl-5">oracledb</span><span class="hl-1">.</span><span class="hl-2">STRING</span><span class="hl-1"> } </span><span class="hl-7">// return the date as a string</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code></pre>
<p>For NUMBER types, this property helps avoid situations where using JavaScript types can lead to a loss of precision.</p>

<a href="#available-type-conversions" id="available-type-conversions" style="color: inherit; text-decoration: none;">
  <h3>Available Type Conversions</h3>
</a>
<p>The following two tables show the available conversion paths between PL/SQL types and JavaScript types in both directions as well as the default conversion in case no specific type is specified.
These (default) conversion rules apply to columns in SELECT statements as well as IN / INOUT / OUT binds and bind values imported from/to PL/SQL (see mle-js-bindings).</p>

<a href="#mapping-plsql-type-to-javascript-types" id="mapping-plsql-type-to-javascript-types" style="color: inherit; text-decoration: none;">
  <h4>Mapping PL/SQL Type to JavaScript Types</h4>
</a>
<p>default mappings in bold</p>
<table>
<thead>
<tr>
<th>PL/SQL Type</th>
<th>JavaScript Types</th>
</tr>
</thead>
<tbody><tr>
<td>NUMBER</td>
<td><strong>number</strong></td>
</tr>
<tr>
<td></td>
<td>OracleNumber</td>
</tr>
<tr>
<td>BOOLEAN</td>
<td><strong>boolean</strong></td>
</tr>
<tr>
<td>VARCHAR2</td>
<td><strong>string</strong></td>
</tr>
<tr>
<td>NVARCHAR2</td>
<td><strong>string</strong></td>
</tr>
<tr>
<td>CHAR</td>
<td><strong>string</strong></td>
</tr>
<tr>
<td>NCHAR</td>
<td><strong>string</strong></td>
</tr>
<tr>
<td>CLOB</td>
<td><strong>OracleClob</strong></td>
</tr>
<tr>
<td></td>
<td>string</td>
</tr>
<tr>
<td>NCLOB</td>
<td><strong>OracleClob</strong></td>
</tr>
<tr>
<td></td>
<td>string</td>
</tr>
<tr>
<td>BLOB</td>
<td><strong>OracleBlob</strong></td>
</tr>
<tr>
<td></td>
<td>Uint8Array</td>
</tr>
<tr>
<td>RAW</td>
<td><strong>Uint8Array</strong></td>
</tr>
<tr>
<td>DATE</td>
<td><strong>Date</strong></td>
</tr>
<tr>
<td></td>
<td>OracleDate</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td><strong>Date</strong></td>
</tr>
<tr>
<td></td>
<td>OracleTimestamp</td>
</tr>
<tr>
<td>TIMESTAMP WITH TIMEZONE</td>
<td><strong>Date</strong></td>
</tr>
<tr>
<td></td>
<td>OracleTimestampTZ</td>
</tr>
<tr>
<td>TIMESTAMP WITH LOCAL TIMEZONE</td>
<td><strong>Date</strong></td>
</tr>
<tr>
<td></td>
<td>OracleTimestampTZ</td>
</tr>
<tr>
<td>INTERVAL YEAR TO MONTH</td>
<td><strong>OracleIntervalYearToMonth</strong></td>
</tr>
<tr>
<td>INTERVAL DAY TO SECOND</td>
<td><strong>OracleIntervalDayToSecond</strong></td>
</tr>
<tr>
<td>NULL</td>
<td><strong>null</strong></td>
</tr>
<tr>
<td>JSON</td>
<td><strong>object</strong> (JavaScript object or array) or corresponding JavaScript type for the JSON value</td>
</tr>
</tbody></table>
<p>&nbsp;</p>


<a href="#mapping-javascript-type-to-plsql-types" id="mapping-javascript-type-to-plsql-types" style="color: inherit; text-decoration: none;">
  <h4>Mapping JavaScript Type to PL/SQL Types</h4>
</a>
<p>default mappings in bold</p>
<table>
<thead>
<tr>
<th>JavaScript Types</th>
<th>PL/SQL Type</th>
</tr>
</thead>
<tbody><tr>
<td>number</td>
<td><strong>NUMBER</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>boolean</td>
<td><strong>NUMBER</strong></td>
</tr>
<tr>
<td></td>
<td>BOOLEAN</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>string</td>
<td><strong>VARCHAR2</strong></td>
</tr>
<tr>
<td></td>
<td>CHAR</td>
</tr>
<tr>
<td></td>
<td>NCHAR</td>
</tr>
<tr>
<td></td>
<td>NCHAR2</td>
</tr>
<tr>
<td></td>
<td>CLOB</td>
</tr>
<tr>
<td></td>
<td>NCLOB</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleClob</td>
<td><strong>CLOB</strong></td>
</tr>
<tr>
<td></td>
<td>NCLOB</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleBlob</td>
<td><strong>BLOB</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>Uint8Array</td>
<td><strong>RAW</strong></td>
</tr>
<tr>
<td></td>
<td>BLOB</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>Date</td>
<td><strong>DATE</strong></td>
</tr>
<tr>
<td></td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td></td>
<td>TIMESTAMP WITH TIMEZONE</td>
</tr>
<tr>
<td></td>
<td>TIMESTAMP WITH LOCAL TIMEZONE</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleDate</td>
<td><strong>DATE</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleTimestamp</td>
<td><strong>TIMESTAMP</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleTimestampTZ</td>
<td><strong>TIMESTAMP WITH TIMEZONE</strong></td>
</tr>
<tr>
<td></td>
<td>TIMESTAMP WITH LOCAL TIMEZONE</td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleIntervalYearToMonth</td>
<td><strong>INTERVAL YEAR TO MONTH</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>OracleIntervalDayToSecond</td>
<td><strong>INTERVAL DAY TO SECOND</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>null</td>
<td><strong>NULL</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>undefined</td>
<td><strong>NULL</strong></td>
</tr>
<tr>
<td></td>
<td>JSON</td>
</tr>
<tr>
<td>object</td>
<td><strong>JSON</strong></td>
</tr>
</tbody></table>
<p>&nbsp;</p>


<a href="#metadata" id="metadata" style="color: inherit; text-decoration: none;">
  <h2>Metadata</h2>
</a>
<p>For SELECT statements, the IResultSet.metaData function returns an array of objects describing details of the columns of the select list.</p>
<pre><code class="language-JavaScript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">rs</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT * FROM EMP&quot;</span><span class="hl-1">);</span><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">md</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-5">rs</span><span class="hl-1">.</span><span class="hl-5">metaData</span><span class="hl-1">) {</span><br/><span class="hl-1">   </span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">columnName</span><span class="hl-1"> = </span><span class="hl-5">md</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1">;</span><br/><span class="hl-1">   </span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">columnDBType</span><span class="hl-1"> = </span><span class="hl-5">md</span><span class="hl-1">.</span><span class="hl-5">dbType</span><span class="hl-1">; </span><span class="hl-7">// ORACLE Database Type, e.g. oracledb.DB_TYPE_NUMBER</span><br/><span class="hl-1">   </span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">columnFetchType</span><span class="hl-1"> = </span><span class="hl-5">md</span><span class="hl-1">.</span><span class="hl-5">fetchType</span><span class="hl-1"> </span><span class="hl-7">// JavaScript Type which will be fetched, e.g. oracledb.STRING</span><br/><span class="hl-1">   </span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-5">isNullable</span><span class="hl-1"> = </span><span class="hl-5">md</span><span class="hl-1">.</span><span class="hl-5">nullable</span><span class="hl-1">;</span><br/><span class="hl-1">   </span><span class="hl-7">// ...</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The <code>name</code>, <code>dbType</code>, <code>fetchType</code> and <code>nullable</code> properties are always available.
Additionally, the following properties are available for some data types:</p>
<ul>
<li><code>byteSize</code> for Oracle character types,</li>
<li><code>precision</code> for NUMBER and TIMESTAMP types, and</li>
<li><code>scale</code> for the NUMBER type.</li>
</ul>

<a href="#errors" id="errors" style="color: inherit; text-decoration: none;">
  <h2>Errors</h2>
</a>
<p>Functions communicate errors by throwing an exception object of type IError.
Those exceptions can be handled using the try-catch statement.</p>
<pre><code><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-5">row</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-5">sql</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;SELECT * FROM&quot;</span><span class="hl-1">).</span><span class="hl-5">rows</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">// never reached</span><br/><span class="hl-1">        ...</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-5">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">err</span><span class="hl-1">.</span><span class="hl-5">errorNum</span><span class="hl-1"> + </span><span class="hl-4">&quot; &quot;</span><span class="hl-1"> + </span><span class="hl-5">err</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The IError object contains name, message and, optionally, error number and offset.</p>
<p>If <code>errorNum</code> exists, it is a standard Oracle Database error, while the offset explains which place in the SQL statement triggered the error.
If not, it is an error specific to this driver (mle-js-oracledb error).</p>
<p>Database Error messages may look like this:</p>
<pre><code><span class="hl-2">ORA</span><span class="hl-1">-</span><span class="hl-8">06502</span><span class="hl-1">: </span><span class="hl-2">PL</span><span class="hl-1">/</span><span class="hl-9">SQL</span><span class="hl-1">: </span><span class="hl-5">numeric</span><span class="hl-1"> </span><span class="hl-5">or</span><span class="hl-1"> </span><span class="hl-5">value</span><span class="hl-1"> </span><span class="hl-9">error</span><span class="hl-1">: </span><span class="hl-5">character</span><span class="hl-1"> </span><span class="hl-5">to</span><span class="hl-1"> </span><span class="hl-5">number</span><span class="hl-1"> </span><span class="hl-5">conversion</span><span class="hl-1"> </span><span class="hl-5">error</span>
</code></pre>
<p>mle-js-oracledb error messages may look like this:</p>
<pre><code><span class="hl-2">NJS</span><span class="hl-1">-</span><span class="hl-8">004</span><span class="hl-1">: </span><span class="hl-5">invalid</span><span class="hl-1"> </span><span class="hl-5">value</span><span class="hl-1"> </span><span class="hl-5">for</span><span class="hl-1"> </span><span class="hl-5">property</span><span class="hl-1"> </span><span class="hl-5">outFormat</span>
</code></pre>

<a href="#executing-non-select-statements" id="executing-non-select-statements" style="color: inherit; text-decoration: none;">
  <h2>Executing non-SELECT Statements</h2>
</a>
<p>Non-SELECT statements can be executed the same way as SELECT statements.</p>
<pre><code><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">conn</span><span class="hl-1">.</span><span class="hl-6">execute</span><span class="hl-1">(</span><span class="hl-4">&quot;insert into emp values (7999, &#39;Hello&#39;, &#39;World&#39;, 7839, &#39;18-DEC-85&#39;, 2500, 0, 30)&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-5">rowsInserted</span><span class="hl-1"> = </span><span class="hl-5">result</span><span class="hl-1">.</span><span class="hl-5">rowsAffected</span><span class="hl-1">;</span>
</code></pre>
<p>For DML statements, <code>rowsAffected</code> contains the number of rows affected, for example the number of rows inserted.
For non-DML statements, <code>rowsAffected</code> will appear as undefined.
Also, <code>rows</code> will appear as undefined for any non-SELECT statement.</p>

<a href="#managing-transactions" id="managing-transactions" style="color: inherit; text-decoration: none;">
  <h3>Managing Transactions</h3>
</a>
<p>Note that, compared to <code>node-oracledb</code>, the (default) connection object in <code>mle-js-oracledb</code> cannot be closed.
This means that <code>mle-js-oracledb</code> does not perform any implicit commit or rollback of transactions and explicit calls to commit or rollback need to be made instead.
This is because the code in <code>mle-js-oracledb</code> executes in the scope of the transaction that called into MLE in the first place.
Similarly, <code>mle-js-oracledb</code> does not support <code>auto-commit</code>, neither as a connection property nor as an option in execute.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">MLE SQL <wbr/>Driver (mle-<wbr/>js-<wbr/>oracledb)</a>
<ul>
<li class="tsd-kind-module"><a href="modules/api.html">api</a></li>
<li class="tsd-kind-module"><a href="modules/index_esm.html">index-<wbr/>esm</a></li>
<li class="tsd-kind-module"><a href="modules/mle_js_oracledb_common.html">mle-<wbr/>js-<wbr/>oracledb-<wbr/>common</a></li>
<li class="tsd-kind-module"><a href="modules/soda_api.html">soda-<wbr/>api</a></li></ul></li></ul></div></details></nav></div></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>